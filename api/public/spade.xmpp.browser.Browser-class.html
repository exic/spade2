<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>spade.xmpp.browser.Browser</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css"></link>
</head>
<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">

<!-- =========== START OF NAVBAR =========== -->
<table class="navbar" border="0" width="100%" cellpadding="0" bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="center">
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="spade-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="trees.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="indices.html">Index</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <font size="-1"><b class="breadcrumbs">
        <a href="spade-module.html">Package&nbsp;spade</a> ::
        <a href="spade.xmpp-module.html">Package&nbsp;xmpp</a> ::
        <a href="spade.xmpp.browser-module.html">Module&nbsp;browser</a> ::
        Class&nbsp;Browser
      </b></font></br>
    </td>
    <td><table cellpadding="0" cellspacing="0">
      <tr><td align="right"><font size="-2">[<a href="../private/spade.xmpp.browser.Browser-class.html">show&nbsp;private</a>&nbsp;|&nbsp;hide&nbsp;private]</font></td></tr>
      <tr><td align="right"><font size="-2">[<a href="frames.html"target="_top">frames</a>&nbsp;|&nbsp;<a href="spade.xmpp.browser.Browser-class.html" target="_top">no&nbsp;frames</a>]</font></td></tr>
    </table></td>
</tr></table>

<!-- =========== START OF CLASS DESCRIPTION =========== -->
<h2 class="class">Class Browser</h2>

<pre class="base-tree">
<a href="spade.xmpp.client.PlugIn-class.html"><code>PlugIn</code></a> --+
         |
        <b>Browser</b>
</pre><br />

<hr/>

<pre class="literalblock">
WARNING! This class is for components only. It will not work in client mode!

Standart xmpppy class that is ancestor of PlugIn and can be attached
to your application.
All processing will be performed in the handlers registered in the browser
instance. You can register any number of handlers ensuring that for each
node/jid combination only one (or none) handler registered.
You can register static information or the fully-blown function that will
calculate the answer dynamically.
Example of static info (see JEP-0030, examples 13-14):
# cl - your xmpppy connection instance.
b=xmpp.browser.Browser()
b.PlugIn(cl)
items=[]
item={}
item['jid']='catalog.shakespeare.lit'
item['node']='books'
item['name']='Books by and about Shakespeare'
items.append(item)
item={}
item['jid']='catalog.shakespeare.lit'
item['node']='clothing'
item['name']='Wear your literary taste with pride'
items.append(item)
item={}
item['jid']='catalog.shakespeare.lit'
item['node']='music'
item['name']='Music from the time of Shakespeare'
items.append(item)
info={'ids':[], 'features':[]}
b.setDiscoHandler({'items':items,'info':info})

items should be a list of item elements.
every item element can have any of these four keys: 'jid', 'node', 'name', 'action'
info should be a dicionary and must have keys 'ids' and 'features'.
Both of them should be lists:
    ids is a list of dictionaries and features is a list of text strings.
Example (see JEP-0030, examples 1-2)
# cl - your xmpppy connection instance.
b=xmpp.browser.Browser()
b.PlugIn(cl)
items=[]
ids=[]
ids.append({'category':'conference','type':'text','name':'Play-Specific Chatrooms'})
ids.append({'category':'directory','type':'chatroom','name':'Play-Specific Chatrooms'})
features=[NS_DISCO_INFO,NS_DISCO_ITEMS,NS_MUC,NS_REGISTER,NS_SEARCH,NS_TIME,NS_VERSION]
info={'ids':ids,'features':features}
# info['xdata']=xmpp.protocol.DataForm() # JEP-0128
b.setDiscoHandler({'items':[],'info':info})
</pre>
<hr/>


<!-- =========== START OF METHOD SUMMARY =========== -->
<table class="summary" border="1" cellpadding="3" cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="summary">
  <th colspan="2">Method Summary</th></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="spade.xmpp.browser.Browser-class.html#__init__" class="summary-sig-name"><code>__init__</code></a>(<span class=summary-sig-arg>self</span>)</span></code>
<br />
Initialises internal variables.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="spade.xmpp.browser.Browser-class.html#delDiscoHandler" class="summary-sig-name"><code>delDiscoHandler</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>node</span>,
          <span class=summary-sig-arg>jid</span>)</span></code>
<br />
Unregisters DISCO handler that is resonsible for this node/jid 
combination.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="spade.xmpp.browser.Browser-class.html#getDiscoHandler" class="summary-sig-name"><code>getDiscoHandler</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>node</span>,
          <span class=summary-sig-arg>jid</span>)</span></code>
<br />
Returns the previously registered DISCO handler that is resonsible for 
this node/jid combination.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="spade.xmpp.browser.Browser-class.html#plugin" class="summary-sig-name"><code>plugin</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>owner</span>)</span></code>
<br />
Registers it's own iq handlers in your application dispatcher 
instance.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="spade.xmpp.browser.Browser-class.html#plugout" class="summary-sig-name"><code>plugout</code></a>(<span class=summary-sig-arg>self</span>)</span></code>
<br />
Unregisters browser's iq handlers from your application dispatcher 
instance.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="spade.xmpp.browser.Browser-class.html#setDiscoHandler" class="summary-sig-name"><code>setDiscoHandler</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>handler</span>,
          <span class=summary-sig-arg>node</span>,
          <span class=summary-sig-arg>jid</span>)</span></code>
<br />
This is the main method that you will use in this class.</td></tr>
<tr bgcolor="#e8f0f8" class="group">
  <th colspan="2">&nbsp;&nbsp;&nbsp;&nbsp;Inherited from PlugIn</th></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="spade.xmpp.client.PlugIn-class.html#DEBUG" class="summary-sig-name"><code>DEBUG</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>text</span>,
          <span class=summary-sig-arg>severity</span>)</span></code>
<br />
Feed a provided debug line to main instance's debug facility along 
with our ID string.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="spade.xmpp.client.PlugIn-class.html#PlugIn" class="summary-sig-name"><code>PlugIn</code></a>(<span class=summary-sig-arg>self</span>,
          <span class=summary-sig-arg>owner</span>)</span></code>
<br />
Attach to main instance and register ourself and all our staff in 
it.</td></tr>
<tr><td align="right" valign="top" width="15%"><font size="-1">&nbsp;</font></td>
  <td><code><span class="summary-sig"><a href="spade.xmpp.client.PlugIn-class.html#PlugOut" class="summary-sig-name"><code>PlugOut</code></a>(<span class=summary-sig-arg>self</span>)</span></code>
<br />
Unregister all our staff from main instance and detach from it.</td></tr>
</table><br />


<!-- =========== START OF METHOD DETAILS =========== -->
<table class="details" border="1" cellpadding="3" cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="details">
  <th colspan="2">Method Details</th></tr>
</table>

<a name="__init__"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">__init__</span>(<span class=sig-arg>self</span>)</span>
    <br /><i>(Constructor)</i>
  </h3>
  Initialises internal variables. Used internally.
  <dl><dt></dt><dd>
    <dl><dt><b>Overrides:</b></dt>
      <dd><a href="spade.xmpp.client.PlugIn-class.html#__init__"><code>spade.xmpp.client.PlugIn.__init__</code></a></dd>
    </dl>
  </dd></dl>
</td></tr></table>

<a name="delDiscoHandler"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">delDiscoHandler</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>node</span>=<span class=sig-default>''</span>,
          <span class=sig-arg>jid</span>=<span class=sig-default>''</span>)</span>
  </h3>
  Unregisters DISCO handler that is resonsible for this node/jid 
  combination. When handler is unregistered the branch is handled in the 
  same way that it's parent branch from this moment.
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="getDiscoHandler"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">getDiscoHandler</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>node</span>=<span class=sig-default>''</span>,
          <span class=sig-arg>jid</span>=<span class=sig-default>''</span>)</span>
  </h3>
  Returns the previously registered DISCO handler that is resonsible 
  for this node/jid combination. Used internally.
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="plugin"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">plugin</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>owner</span>)</span>
  </h3>
  Registers it's own iq handlers in your application dispatcher 
  instance. Used internally.
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="plugout"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">plugout</span>(<span class=sig-arg>self</span>)</span>
  </h3>
  Unregisters browser's iq handlers from your application dispatcher 
  instance. Used internally.
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>

<a name="setDiscoHandler"></a>
<table width="100%" class="func-details" bgcolor="#e0e0e0"><tr><td>
  <h3><span class="sig"><span class="sig-name">setDiscoHandler</span>(<span class=sig-arg>self</span>,
          <span class=sig-arg>handler</span>,
          <span class=sig-arg>node</span>=<span class=sig-default>''</span>,
          <span class=sig-arg>jid</span>=<span class=sig-default>''</span>)</span>
  </h3>
<pre class="literalblock">
This is the main method that you will use in this class.
It is used to register supplied DISCO handler (or dictionary with static info)
as handler of some disco tree branch.
If you do not specify the node this handler will be used for all queried nodes.
If you do not specify the jid this handler will be used for all queried JIDs.

Usage:
cl.Browser.setDiscoHandler(someDict,node,jid)
or
cl.Browser.setDiscoHandler(someDISCOHandler,node,jid)
where

someDict={
    'items':[
              {'jid':'jid1','action':'action1','node':'node1','name':'name1'},
              {'jid':'jid2','action':'action2','node':'node2','name':'name2'},
              {'jid':'jid3','node':'node3','name':'name3'},
              {'jid':'jid4','node':'node4'}
            ],
    'info' :{
              'ids':[
                      {'category':'category1','type':'type1','name':'name1'},
                      {'category':'category2','type':'type2','name':'name2'},
                      {'category':'category3','type':'type3','name':'name3'},
                    ], 
              'features':['feature1','feature2','feature3','feature4'], 
              'xdata':DataForm
            }
         }

and/or

def someDISCOHandler(session,request,TYR):
    # if TYR=='items':  # returns items list of the same format as shown above
    # elif TYR=='info': # returns info dictionary of the same format as shown above
    # else: # this case is impossible for now.
</pre>
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>
<br />


<!-- =========== START OF NAVBAR =========== -->
<table class="navbar" border="0" width="100%" cellpadding="0" bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="center">
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="spade-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="trees.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="indices.html">Index</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar" width="100%"></th>
  </tr>
</table>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tr>
    <td align="left"><font size="-2">Generated by Epydoc 2.1 on Wed Oct 26 17:42:05 2005</font></td>
    <td align="right"><a href="http://epydoc.sourceforge.net"
                      ><font size="-2">http://epydoc.sf.net</font></a></td>
  </tr>
</table>
</body>
</html>
